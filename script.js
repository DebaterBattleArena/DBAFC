const debatersData = {
    'HIROO': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/Hiroo.JPEG.png',
        record: { W: 2, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 1, UD: 1, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'RANZT': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/ranzt_profile.jpg',
        record: { W: 1, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 1, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'ZOGRATIS': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/zogratis_profile.jpg',
        record: { W: 1, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 1, UD: 0, SD: 0 },
            losses: { KO: 1, UD: 0, SD: 0 }
        },
        matches: []
    },
    'PRATAMA': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/pratama_profile.jpg',
        record: { W: 1, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 1, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'AHENG': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/aheng_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    },
    'ARYANWT': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/aryanwt_profile.jpg',
        record: { W: 1, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 1, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    },
    'THINZEL': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'LOW TIER',
        imageUrl: 'images/thinzel_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 1, UD: 0, SD: 0 }
        },
        matches: []
    },
    'LIANX': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/lianx_profile.jpg',
        record: { W: 1, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 1, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'VALEN': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/valen_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'KUREJI': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'LOW TIER',
        imageUrl: 'images/kureji_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'KARIZ': {
        country: 'INDONESIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/kariz_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'THONG': {
        country: 'LAOS',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/farras_profile.jpg.png',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'ADYY': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/adyy_profile.jpg',
        record: { W: 1, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 1, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    },
    'RYUU': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/ryuu_profile.jpg',
        record: { W: 1, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 1, SD: 0 },
            losses: { KO: 1, UD: 0, SD: 0 }
        },
        matches: []
    },
    'MUCHIBEI': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/muchibei_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 1, UD: 0, SD: 0 }
        },
        matches: []
    },
    'RENJI': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/renji_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    },
    'RIM': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'LOW TIER',
        imageUrl: 'images/rim_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    },
    'SHADE': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/shade_profile.jpg',
        record: { W: 1, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 1, UD: 0, SD: 0 },
            losses: { KO: 1, UD: 0, SD: 0 }
        },
        matches: []
    },
    'KYUKI': {
        country: 'MALAYSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/kyuki_profile.jpg',
        record: { W: 1, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 1, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'KLEIN': {
        country: 'VIETNAM',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'INACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/klein_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'KAZ': {
        country: 'PHILIPPINES',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/kaz_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    },
    'AARON': {
        country: 'MEXICO',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/Aaron.png',
        record: { W: 1, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 1, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'XAVIER': {
        country: 'BRAZIL',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'INACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/xavier_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'MIKAEL': {
        country: 'BRAZIL',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/mikael_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'RABBITTO': {
        country: 'CANADA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/rabbito_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'HYRUKI': {
        country: 'ITALY',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/hyruki_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'LARNEX': {
        country: 'FRANCE',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'INACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/larnex_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'IULIAN': {
        country: 'ROMANIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'LOW TIER',
        imageUrl: 'images/iulian_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'HOMURA KIN': {
        country: 'RUSSIA',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/homura_kin_profile.jpg',
        record: { W: 0, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'YULZ CLOVER': {
        country: 'UNKNOWN',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'MID TIER',
        imageUrl: 'images/yulz_clover_profile.jpg',
        record: { W: 1, L: 0, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 1, SD: 0 },
            losses: { KO: 0, UD: 0, SD: 0 }
        },
        matches: []
    },
    'RAJU': {
        country: 'UNKNOWN',
        age: 'UNKNOWN',
        community: 'DBA',
        status: 'ACTIVE',
        division: 'HIGH TIER',
        imageUrl: 'images/raju_profile.jpg',
        record: { W: 0, L: 1, D: 0 },
        breakdown: {
            wins: { KO: 0, UD: 0, SD: 0 },
            losses: { KO: 0, UD: 1, SD: 0 }
        },
        matches: []
    }
};

const matches = [
    { event: 'DBA 1', debater1: 'HIROO', debater2: 'RENJI', winner: 'HIROO', loser: 'RENJI', tier: 'Mid Tier', method: 'UD' },
    { event: 'DBA 1', debater1: 'ZOGRATIS', debater2: 'MUCHIBEI', winner: 'ZOGRATIS', loser: 'MUCHIBEI', tier: 'High Tier', method: 'KO' },
    { event: 'DBA 1', debater1: 'ARYANWT', debater2: 'RIM', winner: 'ARYANWT', loser: 'RIM', tier: 'Low Tier', method: 'UD' },
    { event: 'DBA 1', debater1: 'THINZEL', debater2: 'SHADE', winner: 'SHADE', loser: 'THINZEL', tier: 'Low Tier', method: 'KO' },
    { event: 'DBA 1', debater1: 'RANZT', debater2: 'RYUU', winner: 'RANZT', loser: 'RYUU', tier: 'Mid Tier', method: 'KO' },
    { event: 'DBA 1', debater1: 'LIANX', debater2: 'ADYY', winner: 'LIANX', loser: 'ADYY', tier: 'High Tier', method: 'UD' },
    { event: 'DBA 2', debater1: 'RAJU', debater2: 'RYUU', winner: 'RYUU', loser: 'RAJU', tier: 'High Tier', method: 'UD' },
    { event: 'DBA 2', debater1: 'SHADE', debater2: 'KYUKI', winner: 'KYUKI', loser: 'SHADE', tier: 'High Tier', method: 'KO' },
    { event: 'DBA 2', debater1: 'AHENG', debater2: 'PRATAMA', winner: 'PRATAMA', loser: 'AHENG', tier: 'High Tier', method: 'UD' },
    { event: 'DBA 2', debater1: 'ADYY', debater2: 'ZOGRATIS', winner: 'ADYY', loser: 'ZOGRATIS', tier: 'High Tier', method: 'KO' },
    { event: 'DBA 2', debater1: 'ARYANWT', debater2: 'AARON', winner: 'AARON', loser: 'ARYANWT', tier: 'High Tier', method: 'UD' },
    { event: 'DBA Special Match', debater1: 'YULZ CLOVER', debater2: 'KAZ', winner: 'YULZ CLOVER', loser: 'KAZ', tier: 'Mid Tier', method: 'UD' },
];

const points = {
    'Menang Main Event': 20,
    'Kalah Main Event': -10,
    'Menang Co-Main Event': 10,
    'Kalah Co-Main Event': -5,
    'Menang Main Card': 5,
    'Kalah Main Card': 0
};

function populateDebaterData() {
    for (const name in debatersData) {
        debatersData[name].record = { W: 0, L: 0, D: 0 };
        debatersData[name].breakdown = { wins: { KO: 0, UD: 0, SD: 0 }, losses: { KO: 0, UD: 0, SD: 0 } };
        debatersData[name].matches = [];
    }

    matches.forEach(match => {
        if (debatersData[match.winner]) {
            debatersData[match.winner].record.W++;
            debatersData[match.winner].breakdown.wins[match.method]++;
        }
        if (debatersData[match.loser]) {
            debatersData[match.loser].record.L++;
            debatersData[match.loser].breakdown.losses[match.method]++;
        }

        if (debatersData[match.debater1]) {
            debatersData[match.debater1].matches.push({
                opponent: match.debater2,
                outcome: match.debater1 === match.winner ? 'Win' : 'Loss',
                event: match.event,
                method: match.method
            });
        }
        if (debatersData[match.debater2]) {
            debatersData[match.debater2].matches.push({
                opponent: match.debater1,
                outcome: match.debater2 === match.winner ? 'Win' : 'Loss',
                event: match.event,
                method: match.method
            });
        }
    });
}

function calculateRanking() {
    const ranking = {};

    for (const name in debatersData) {
        ranking[name] = {
            points: 0,
            tier: debatersData[name].division,
            country: debatersData[name].country,
        };
    }

    matches.forEach(match => {
        const matchType = 'Main Card';
        if (ranking[match.winner]) {
            ranking[match.winner].points += points[`Menang ${matchType}`];
        }
        if (ranking[match.loser]) {
            ranking[match.loser].points += points[`Kalah ${matchType}`];
        }
    });

    const sortedRanking = Object.keys(ranking).sort((a, b) => ranking[b].points - ranking[a].points);

    const tieredRanking = {
        'HIGH TIER': [],
        'MID TIER': [],
        'LOW TIER': []
    };

    sortedRanking.forEach(name => {
        const debater = ranking[name];
        if (debater.tier && tieredRanking[debater.tier]) {
            tieredRanking[debater.tier].push({
                name: name,
                points: debater.points,
                country: debater.country
            });
        }
    });

    for (const tier in tieredRanking) {
        tieredRanking[tier].sort((a, b) => b.points - a.points);
    }

    return tieredRanking;
}

function renderDebaterProfiles() {
    const container = document.getElementById('debater-container');
    if (!container) return;

    const debatersToShow = Object.keys(debatersData);
    debatersToShow.forEach(name => {
        const debater = debatersData[name];
        const card = document.createElement('a');
        card.className = 'debater-card';
        card.href = `profile.html?name=${encodeURIComponent(name)}`;

        const imageUrl = debater.imageUrl || 'images/placeholder_profile.jpg';

        card.innerHTML = `
            <img src="${imageUrl}" alt="${name}">
            <h3>${name}</h3>
            <p>${debater.country}</p>
        `;
        container.appendChild(card);
    });
}

function renderSpecificDebaterProfile() {
    const urlParams = new URLSearchParams(window.location.search);
    const debaterName = urlParams.get('name');
    const container = document.querySelector('main');

    if (!debaterName || !debatersData[debaterName]) {
        container.innerHTML = `<p style="text-align: center; margin-top: 5rem;">Debater tidak ditemukan.</p>`;
        return;
    }

    const debater = debatersData[debaterName];
    const imageUrl = debater.imageUrl || 'images/placeholder_profile_wide.jpg';

    const profileHTML = `
        <div class="single-profile-card">
            <div class="profile-hero">
                <img src="${imageUrl}" alt="${debaterName}">
                <div class="profile-info-overlay">
                    <h3>${debaterName}</h3>
                    <div class="details">
                        <div>
                            <h4>DIVISION</h4>
                            <p>${debater.division}</p>
                        </div>
                        <div>
                            <h4>COUNTRY</h4>
                            <p>${debater.country}</p>
                        </div>
                        <div>
                            <h4>AGE</h4>
                            <p>${debater.age}</p>
                        </div>
                        <div>
                            <h4>COMMUNITY</h4>
                            <p>${debater.community}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="profile-content">
                <div class="profile-record">
                    <h4>BREAKDOWN</h4>
                    <div class="record-summary">
                        <div class="record-box win-box">
                            <span class="label">WINS</span>
                            <span class="count">${debater.record.W}</span>
                        </div>
                        <div class="record-box loss-box">
                            <span class="label">LOSSES</span>
                            <span class="count">${debater.record.L}</span>
                        </div>
                    </div>
                </div>
                <div class="match-history-section">
                    <h4>MATCH HISTORY</h4>
                    <div class="match-list">
                        ${debater.matches.length > 0 ?
                            debater.matches.map(match => `
                                <div class="match-row">
                                    <span class="result-text ${match.outcome.toLowerCase()}">${match.outcome.toUpperCase()}</span>
                                    <div class="opponent-event">
                                        <p class="debater-name">${match.opponent}</p>
                                        <p class="event-details-text">${match.event} (${match.method})</p>
                                    </div>
                                </div>
                            `).join('')
                            : '<p>Belum ada riwayat pertandingan.</p>'
                        }
                    </div>
                </div>
            </div>
        </div>
    `;

    container.innerHTML = profileHTML;
}

function renderRanking() {
    const ranking = calculateRanking();
    const container = document.getElementById('ranking-container');
    if (!container) return;

    container.innerHTML = '';
    const tiers = ['HIGH TIER', 'MID TIER', 'LOW TIER'];
    tiers.forEach(tier => {
        const tierCard = document.createElement('div');
        tierCard.className = 'ranking-tier-card';
        tierCard.innerHTML = `<h3>${tier.toUpperCase()}</h3>`;
        const list = document.createElement('ol');
        list.className = 'ranking-list';

        ranking[tier].forEach(debater => {
            const li = document.createElement('li');
            const imageUrl = debatersData[debater.name].imageUrl || 'images/placeholder_profile.jpg';
            li.innerHTML = `
                <img src="${imageUrl}" alt="${debater.name}">
                <div class="ranking-info">
                    <span class="ranking-name">${debater.name}</span>
                    <span class="ranking-country">${debater.country}</span>
                </div>
                <span class="ranking-points">${debater.points}</span>
            `;
            list.appendChild(li);
        });
        tierCard.appendChild(list);
        container.appendChild(tierCard);
    });
}

function renderArchive() {
    const container = document.getElementById('archive-container');
    if (!container) return;

    const events = [...new Set(matches.map(match => match.event))];
    events.forEach(event => {
        const eventCard = document.createElement('div');
        eventCard.className = 'event-card';
        eventCard.innerHTML = `<h3>${event.toUpperCase()}</h3>`;
        const eventMatches = matches.filter(match => match.event === event);

        const matchesList = document.createElement('div');
        matchesList.className = 'match-results';

        eventMatches.forEach(match => {
            const matchRow = document.createElement('div');
            matchRow.className = 'match-row';
            matchRow.innerHTML = `
                <span class="result-text win">${match.winner === match.debater1 ? 'WIN' : 'LOSS'}</span>
                <div class="opponent-event">
                    <p class="debater-name">${match.debater1} vs ${match.debater2}</p>
                    <p class="event-details-text">${match.event}</p>
                </div>
            `;
            matchesList.appendChild(matchRow);
        });
        eventCard.appendChild(matchesList);
        container.appendChild(eventCard);
    });
}

function setupOverlayNavigation() {
    const searchToggle = document.getElementById('search-toggle');
    const menuToggle = document.getElementById('menu-toggle');
    const searchOverlay = document.getElementById('search-overlay');
    const menuOverlay = document.getElementById('menu-overlay');
    const closeSearchBtn = document.getElementById('close-search-overlay');
    const closeMenuBtn = document.getElementById('close-menu-overlay');
    const searchInput = document.getElementById('searchInput');

    if (menuToggle && menuOverlay) {
        menuToggle.addEventListener('click', () => {
            menuOverlay.classList.remove('hidden');
            searchOverlay.classList.add('hidden');
            document.body.style.overflow = 'hidden';
        });
    }

    if (closeMenuBtn && menuOverlay) {
        closeMenuBtn.addEventListener('click', () => {
            menuOverlay.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });
    }

    if (searchToggle && searchOverlay) {
        searchToggle.addEventListener('click', () => {
            searchOverlay.classList.remove('hidden');
            menuOverlay.classList.add('hidden');
            document.body.style.overflow = 'hidden';
            searchInput.focus();
        });
    }

    if (closeSearchBtn && searchOverlay) {
        closeSearchBtn.addEventListener('click', () => {
            searchOverlay.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });
    }

    const searchButtonOverlay = document.getElementById('search-button-overlay');
    if (searchInput && searchButtonOverlay) {
        const handleSearch = () => {
            const query = searchInput.value.toLowerCase().trim();
            if (query) {
                const debaterFound = Object.keys(debatersData).find(name => name.toLowerCase().includes(query));
                if (debaterFound) {
                    window.location.href = `profile.html?name=${encodeURIComponent(debaterFound)}`;
                } else {
                    alert('Debater tidak ditemukan.');
                }
                searchOverlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        };

        searchButtonOverlay.addEventListener('click', handleSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });
    }
}

document.addEventListener('DOMContentLoaded', () => {
    populateDebaterData();
    setupOverlayNavigation();

    const path = window.location.pathname;
    if (path.includes('profile.html')) {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('name')) {
            renderSpecificDebaterProfile();
        } else {
            renderDebaterProfiles();
        }
    } else if (path.includes('ranking.html')) {
        renderRanking();
    } else if (path.includes('archive.html')) {
        renderArchive();
    }
});
